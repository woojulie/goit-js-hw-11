{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export async function fetchImages(query, page = 1) {\n    const API_KEY = '45718127-30771d56f6b088ceef33bd7c7';\n    const BASE_URL = 'https://pixabay.com/api/';\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=12`;\n\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","export function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(image => {\n        return `\n            <a href=\"${image.largeImageURL}\" class=\"gallery__link\">\n                <div class=\"gallery-item\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                        <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                        <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                        <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n                    </div>\n                </div>\n            </a>\n        `;\n    }).join('');\n\n    gallery.innerHTML = markup;\n}\n\nexport function clearGallery() {\n    document.querySelector('.gallery').innerHTML = '';\n}","\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nlet currentPage = 1;\nlet query = '';\nlet gallery;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = event.currentTarget.elements.user_query.value.trim();\n\n    if (!query) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query.' });\n        return;\n    }\n\n    clearGallery();\n    currentPage = 1;\n    fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n    try {\n        const { hits, totalHits } = await fetchImages(query, currentPage);\n\n        if (hits.length === 0) {\n            iziToast.warning({ title: 'No Results', message: 'Sorry, there are no images matching your search query. Please try again!' });\n            return;\n        }\n\n        renderGallery(hits);\n        gallery = new SimpleLightbox('.gallery a');\n        gallery.refresh();\n\n        if (currentPage * 12 >= totalHits) {\n            iziToast.info({ title: 'End of Results', message: 'You have reached the end of search results.' });\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later.' });\n    }\n}\n\nwindow.addEventListener('scroll', () => {\n    if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\n        currentPage += 1;\n        fetchAndRenderImages();\n    }\n});\n"],"names":["fetchImages","query","page","url","error","renderGallery","images","gallery","markup","image","clearGallery","form","currentPage","event","iziToast","fetchAndRenderImages","hits","totalHits","SimpleLightbox"],"mappings":"6vBAAO,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CAG/C,MAAMC,EAAM,qEAAgC,mBAAmBF,CAAK,CAAC,iEAAiEC,CAAI,eAE1I,GAAI,CAGA,OADa,MADI,MAAM,MAAMC,CAAG,GACJ,MAE/B,OAAQC,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCbO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GACf;AAAA,uBACQA,EAAM,aAAa;AAAA;AAAA,gCAEVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4DAEVA,EAAM,KAAK;AAAA,4DACXA,EAAM,KAAK;AAAA,+DACRA,EAAM,QAAQ;AAAA,gEACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAK1E,EAAE,KAAK,EAAE,EAEVF,EAAQ,UAAYC,CACxB,CAEO,SAASE,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CCfA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAClD,IAAIC,EAAc,EACdX,EAAQ,GACRM,EAEJI,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAI7C,GAHAA,EAAM,eAAc,EACpBZ,EAAQY,EAAM,cAAc,SAAS,WAAW,MAAM,OAElD,CAACZ,EAAO,CACRa,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACH,CAEDJ,IACAE,EAAc,EACdG,GACJ,CAAC,EAED,eAAeA,GAAuB,CAClC,GAAI,CACA,KAAM,CAAE,KAAAC,EAAM,UAAAC,CAAW,EAAG,MAAMjB,EAAYC,EAAOW,CAAW,EAEhE,GAAII,EAAK,SAAW,EAAG,CACnBF,EAAS,QAAQ,CAAE,MAAO,aAAc,QAAS,0EAA0E,CAAE,EAC7H,MACH,CAEDT,EAAcW,CAAI,EAClBT,EAAU,IAAIW,EAAe,YAAY,EACzCX,EAAQ,QAAO,EAEXK,EAAc,IAAMK,GACpBH,EAAS,KAAK,CAAE,MAAO,iBAAkB,QAAS,6CAA6C,CAAE,CAExG,MAAe,CACZA,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC9F,CACL,CAEA,OAAO,iBAAiB,SAAU,IAAM,CAChC,OAAO,YAAc,OAAO,SAAW,SAAS,KAAK,eACrDF,GAAe,EACfG,IAER,CAAC"}